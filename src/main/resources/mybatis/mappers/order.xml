<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.order">
<!-- 리절트 맵 정의 -->	
	<resultMap id="orderResult" type="OrderDTO">
		<result property="order_seq_num" column="order_seq_num" />
		<result property="order_id" column="order_id" />
		<result property="member_id" column="member_id" />
		<result property="product_code" column="product_code" />
		<result property="order_qty" column="order_qty" />
		<result property="order_date" column="order_date" />
		<result property="order_state" column="order_state" />
	</resultMap>	

	
		
	<!-- 품목당 수량확인 -->
	<select id="countQty" parameterType="java.util.Map" resultType="int">
        <![CDATA[
		select cart_qty from cart
		    where member_id = #{member_id}
		        and product_code = #{product_code}
	    ]]>
	</select>
	
	<!-- 주문서작성 -->
	<insert id="addOrder" parameterType="java.util.Map">
		<![CDATA[
		insert into u_order 
   			(order_seq_num,order_id,member_id,product_code,order_qty) values
        		(u_order_seq.nextval, #{order_id} ,#{member_id},#{product_code},#{order_qty})
		]]>
	</insert>
	
	
	
	
	
	
	
<!-- 	
	<update id="qtyChange" parameterType="java.util.Map">
		<![CDATA[
			update cart set cart_qty=#{cart_qty}
			    where member_id = #{member_id}
			        and product_code = #{product_code}
		]]>
	</update>
	<select id="cartSameCode" parameterType="CartDTO" resultType="int">
        <![CDATA[
       select count(*) from cart
    		where member_id = #{member_id}
        		and product_code = #{product_code}
	    ]]>
	</select>
	<delete id="del" parameterType="java.util.Map">
		<![CDATA[
			delete from cart 
				where product_code=#{product_code} 
					and member_id = #{member_id}
		]]>
	</delete>
	<insert id="addCart" parameterType="CartDTO">
		<![CDATA[
		INSERT INTO cart
		VALUES(cart_seq.nextval, #{member_id}, #{product_code},#{cart_qty})
		]]>
	</insert> -->
	
	

	
	
	
</mapper>